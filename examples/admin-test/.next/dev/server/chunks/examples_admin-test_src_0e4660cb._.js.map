{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///home/dev/projects/prisma-tools/examples/admin-test/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '../generated/prisma';\nimport { PrismaLibSql } from '@prisma/adapter-libsql';\nimport path from 'path';\n\nconst dbPath = path.join(process.cwd(), 'prisma', 'dev.db');\nconst adapter = new PrismaLibSql({ url: `file:${dbPath}` });\n\nconst prisma = new PrismaClient({ adapter });\n\nexport default prisma;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;AAEA,MAAM,SAAS,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;AAClD,MAAM,UAAU,IAAI,kQAAY,CAAC;IAAE,KAAK,CAAC,KAAK,EAAE,QAAQ;AAAC;AAEzD,MAAM,SAAS,IAAI,kLAAY,CAAC;IAAE;AAAQ;uCAE3B"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///home/dev/projects/prisma-tools/examples/admin-test/src/graphql/admin.ts"],"sourcesContent":["import { existsSync } from 'fs';\nimport { join } from 'path';\nimport { LowSync } from 'lowdb';\nimport { JSONFileSync } from 'lowdb/node';\nimport { enumType, extendType, inputObjectType, nonNull, objectType, stringArg } from 'nexus';\n\ninterface AdminSchema {\n  models: any[];\n  enums: any[];\n}\n\nconst schemaPath = join(process.cwd(), 'src', 'generated', 'paljs', 'admin', 'schema.json');\n\nfunction getDb() {\n  const adapter = new JSONFileSync<AdminSchema>(schemaPath);\n  const defaultData: AdminSchema = { models: [], enums: [] };\n  const db = new LowSync<AdminSchema>(adapter, defaultData);\n  db.read();\n  if (!db.data) {\n    db.data = defaultData;\n  }\n  if (!db.data.models) {\n    db.data.models = [];\n  }\n  if (!db.data.enums) {\n    db.data.enums = [];\n  }\n  return db;\n}\n\n// Admin Types\nexport const AdminEnum = objectType({\n  nonNullDefaults: { output: true },\n  name: 'AdminEnum',\n  definition(t) {\n    t.string('name');\n    t.list.string('fields');\n  },\n});\n\nexport const AdminSchema = objectType({\n  nonNullDefaults: { output: true },\n  name: 'AdminSchema',\n  definition(t) {\n    t.list.field('models', { type: 'AdminModel' });\n    t.list.field('enums', { type: 'AdminEnum' });\n  },\n});\n\nexport const AdminModel = objectType({\n  nonNullDefaults: { output: true },\n  name: 'AdminModel',\n  definition(t) {\n    t.string('id');\n    t.string('name');\n    t.string('idField');\n    t.list.string('displayFields');\n    t.boolean('create');\n    t.boolean('update');\n    t.boolean('delete');\n    t.list.field('fields', { type: 'AdminField' });\n  },\n});\n\nexport const AdminField = objectType({\n  nonNullDefaults: { output: true },\n  name: 'AdminField',\n  definition(t) {\n    t.string('id');\n    t.string('name');\n    t.string('title');\n    t.string('type');\n    t.boolean('list');\n    t.boolean('required');\n    t.boolean('isId');\n    t.boolean('unique');\n    t.boolean('create');\n    t.boolean('update');\n    t.boolean('read');\n    t.boolean('filter');\n    t.boolean('sort');\n    t.boolean('editor');\n    t.boolean('upload');\n    t.nullable.boolean('relationField');\n    t.int('order');\n    t.field('kind', { type: 'AdminKindEnum' });\n  },\n});\n\nexport const AdminKindEnum = enumType({\n  name: 'AdminKindEnum',\n  members: ['object', 'enum', 'scalar'],\n});\n\nexport const UpdateModelInput = inputObjectType({\n  nonNullDefaults: { input: false },\n  name: 'UpdateModelInput',\n  definition(t) {\n    t.string('name');\n    t.string('idField');\n    t.list.string('displayFields');\n    t.boolean('create');\n    t.boolean('update');\n    t.boolean('delete');\n    t.list.field('fields', { type: 'UpdateFieldInput' });\n  },\n});\n\nexport const UpdateFieldInput = inputObjectType({\n  nonNullDefaults: { input: false },\n  name: 'UpdateFieldInput',\n  definition(t) {\n    t.string('id');\n    t.string('name');\n    t.string('title');\n    t.string('type');\n    t.boolean('list');\n    t.boolean('required');\n    t.boolean('isId');\n    t.boolean('unique');\n    t.boolean('create');\n    t.boolean('update');\n    t.boolean('read');\n    t.boolean('filter');\n    t.boolean('sort');\n    t.boolean('editor');\n    t.boolean('upload');\n    t.nullable.boolean('relationField');\n    t.int('order');\n    t.field('kind', { type: 'AdminKindEnum' });\n  },\n});\n\n// Admin Queries\nexport const AdminQuery = extendType({\n  type: 'Query',\n  definition(t) {\n    t.field('getSchema', {\n      type: nonNull('AdminSchema'),\n      resolve() {\n        if (!existsSync(schemaPath)) {\n          return { models: [], enums: [] };\n        }\n        const db = getDb();\n        return {\n          models: db.data?.models || [],\n          enums: db.data?.enums || [],\n        };\n      },\n    });\n  },\n});\n\nexport const AdminMutation = extendType({\n  type: 'Mutation',\n  definition(t) {\n    t.field('updateField', {\n      type: nonNull('AdminField'),\n      args: {\n        id: nonNull(stringArg()),\n        modelId: nonNull(stringArg()),\n        data: nonNull('UpdateFieldInput'),\n      },\n      resolve(_, { id, modelId, data }) {\n        const db = getDb();\n        const model = db.data.models?.find((m) => m.id === modelId);\n        if (!model) {\n          throw new Error(`Model with id ${modelId} not found`);\n        }\n        const field = model.fields?.find((f: any) => f.id === id);\n        if (!field) {\n          throw new Error(`Field with id ${id} not found in model ${modelId}`);\n        }\n        Object.assign(field, data);\n        db.write();\n        return field;\n      },\n    });\n    t.field('updateModel', {\n      type: nonNull('AdminModel'),\n      args: {\n        id: nonNull(stringArg()),\n        data: nonNull('UpdateModelInput'),\n      },\n      resolve(_, { id, data }) {\n        const db = getDb();\n        const model = db.data.models?.find((m) => m.id === id);\n        if (!model) {\n          throw new Error(`Model with id ${id} not found`);\n        }\n        Object.assign(model, data);\n        db.write();\n        return model;\n      },\n    });\n  },\n});\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":["file:///home/dev/projects/prisma-tools/examples/admin-test/src/app/api/graphql/route.ts"],"sourcesContent":["import { createYoga } from 'graphql-yoga';\nimport { makeSchema } from 'nexus';\nimport { paljs } from '@paljs/nexus';\nimport prisma from '@/lib/prisma';\nimport * as adminTypes from '@/graphql/admin';\nimport * as generatedTypes from '@/generated/paljs/nexus';\nimport { dmmf, type ModelName, type ModelsObject } from '@/generated/paljs';\nimport { join } from 'path';\n\n// Create schema with paljs plugin for PrismaSelect\n// paljs() provides BatchPayload + scalars (DateTime, Json, BigInt, Decimal, Bytes)\nconst schema = makeSchema({\n  types: [\n    generatedTypes,\n    adminTypes,\n  ],\n  plugins: [\n    paljs<ModelName, ModelsObject>({\n      prismaSelectOptions: {\n        dmmf: [dmmf],\n      },\n      includeAdmin: true,\n    }),\n  ],\n  outputs: {\n    typegen: join(process.cwd(), 'src', 'generated', 'nexus-typegen.ts'),\n    schema: join(process.cwd(), 'src', 'generated', 'schema.graphql'),\n  },\n});\n\n// Create Yoga instance\nconst yoga = createYoga({\n  schema,\n  graphqlEndpoint: '/api/graphql',\n  context: () => ({\n    prisma,\n  }),\n  fetchAPI: { Response },\n});\n\n// Export handlers\nexport const GET = yoga;\nexport const POST = yoga;\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;;;;;;;;;;;;;AAEA,mDAAmD;AACnD,mFAAmF;AACnF,MAAM,SAAS,IAAA,uOAAU,EAAC;IACxB,OAAO;QACL;QACA;KACD;IACD,SAAS;QACP,IAAA,6IAAK,EAA0B;YAC7B,qBAAqB;gBACnB,MAAM;oBAAC,iLAAI;iBAAC;YACd;YACA,cAAc;QAChB;KACD;IACD,SAAS;QACP,SAAS,IAAA,yGAAI,EAAC,QAAQ,GAAG,IAAI,OAAO,aAAa;QACjD,QAAQ,IAAA,yGAAI,EAAC,QAAQ,GAAG,IAAI,OAAO,aAAa;IAClD;AACF;AAEA,uBAAuB;AACvB,MAAM,OAAO,IAAA,gPAAU,EAAC;IACtB;IACA,iBAAiB;IACjB,SAAS,IAAM,CAAC;YACd,QAAA,8JAAM;QACR,CAAC;IACD,UAAU;QAAE;IAAS;AACvB;AAGO,MAAM,MAAM;AACZ,MAAM,OAAO"}}]
}